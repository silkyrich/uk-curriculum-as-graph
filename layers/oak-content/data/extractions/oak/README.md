# Oak National Academy — Content Data

This directory holds the Oak National Academy content catalogue and curriculum
alignment mappings for the `:Content` graph layer (model v3.4).

## Directory layout

```
oak/
  README.md               — this file
  catalogue/
    oak_catalogue.json    — full Oak unit/lesson inventory (generated by --discover)
  mappings/
    mathematics_ks2.json  — OakUnit/OakLesson → Domain/Concept mappings (one file per subject+KS)
    english_ks2.json
    ...
```

## Workflow

### Step 1: Obtain an API key

Request free access at https://open-api.thenational.academy/
Set it as an environment variable:

```bash
export OAK_API_KEY=<your-key>
```

### Step 2: Discover the Oak catalogue

Fetches the full hierarchy (all key stages → subjects → units → lessons):

```bash
python3 scripts/import_oak_content.py --discover
```

Output: `catalogue/oak_catalogue.json`

### Step 3: Create mapping files

For each subject, create a mapping file in `mappings/` following the format below.

### Step 4: Import into Neo4j

```bash
# All subjects
python3 scripts/import_oak_content.py --import

# Single subject (matches against mapping filename)
python3 scripts/import_oak_content.py --import --subject mathematics
```

---

## Mapping file format

Filename: `{subject}_{key_stage}.json`  (e.g. `mathematics_ks2.json`)

```json
{
  "metadata": {
    "subject": "Mathematics",
    "key_stage": "KS2",
    "oak_programme_slug": "maths-primary-ks2",
    "notes": "Mappings reviewed 2026-03-01"
  },
  "units": [
    {
      "oak_unit_slug": "year-4-multiplication-and-division",
      "oak_unit_title": "Multiplication and Division",
      "key_stage": "KS2",
      "subject": "Mathematics",
      "year_group": "year-4",
      "programme_slug": "maths-primary-ks2",
      "lesson_count": 8,
      "covers_domain_ids": [
        "MA-KS2-D004"
      ],
      "lessons": [
        {
          "oak_lesson_slug": "multiplication-as-scaling",
          "oak_lesson_title": "Multiplication as Scaling",
          "oak_unit_slug": "year-4-multiplication-and-division",
          "key_stage": "KS2",
          "subject": "Mathematics",
          "year_group": "year-4",
          "has_video": true,
          "quiz_question_count": 6
        }
      ]
    }
  ],
  "lesson_concept_mappings": [
    {
      "oak_lesson_slug": "multiplication-as-scaling",
      "teaches_concept_ids": [
        "MA-Y4-C008",
        "MA-Y4-C009"
      ],
      "notes": "Covers scaling as multiplication and commutative property"
    }
  ]
}
```

## Graph model

```
(:Content:OakUnit)   -[:HAS_LESSON]->  (:Content:OakLesson)
(:Content:OakUnit)   -[:COVERS]->      (:Curriculum:Domain)
(:Content:OakLesson) -[:TEACHES]->     (:Curriculum:Concept)
```

### OakUnit node properties

| Property | Description |
|---|---|
| `oak_unit_slug` | Unique Oak identifier, e.g. `year-4-multiplication-and-division` |
| `oak_unit_title` | Human-readable title |
| `key_stage` | `KS1`, `KS2`, `KS3`, or `KS4` |
| `subject` | Curriculum subject name |
| `year_group` | e.g. `year-4` |
| `programme_slug` | Oak programme (sequence) this unit belongs to |
| `lesson_count` | Number of lessons in this unit |
| `source_url` | Canonical Oak teacher URL |
| `licence` | `OGL v3.0` |

### OakLesson node properties

| Property | Description |
|---|---|
| `oak_lesson_slug` | Unique Oak identifier, e.g. `multiplication-as-scaling` |
| `oak_lesson_title` | Human-readable title |
| `oak_unit_slug` | Parent unit slug |
| `key_stage` | Inherited from unit |
| `subject` | Inherited from unit |
| `year_group` | Inherited from unit |
| `has_video` | Boolean |
| `quiz_question_count` | Number of quiz questions in the lesson |
| `source_url` | Canonical Oak teacher URL |
| `licence` | `OGL v3.0` |

## Useful queries

```cypher
-- Which concepts have Oak lesson coverage?
MATCH (l:OakLesson)-[:TEACHES]->(c:Concept)
RETURN c.concept_id, c.concept_name, count(l) AS lesson_count
ORDER BY lesson_count DESC

-- Gap analysis: concepts with no Oak lesson
MATCH (c:Concept)
WHERE NOT (:OakLesson)-[:TEACHES]->(c)
RETURN c.concept_id, c.concept_name, c.source_reference
ORDER BY c.source_reference

-- Concepts covered by Oak, with unit context
MATCH (u:OakUnit)-[:HAS_LESSON]->(l:OakLesson)-[:TEACHES]->(c:Concept)
RETURN u.oak_unit_title, u.year_group, l.oak_lesson_title, c.concept_name
ORDER BY u.subject, u.year_group, u.oak_unit_title

-- Coverage percentage by subject
MATCH (c:Concept)
OPTIONAL MATCH (l:OakLesson)-[:TEACHES]->(c)
RETURN c.source_reference AS ref,
       count(DISTINCT c) AS total_concepts,
       count(DISTINCT CASE WHEN l IS NOT NULL THEN c END) AS covered,
       round(100.0 * count(DISTINCT CASE WHEN l IS NOT NULL THEN c END) / count(DISTINCT c)) AS pct
ORDER BY ref
```

## Licensing

All Oak content ingested via this pipeline is subject to OGL v3.0.
Attribution must be included wherever Oak content is displayed:

> "[Lesson Title]" by Oak National Academy licensed under OGL v3.0
> https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/
